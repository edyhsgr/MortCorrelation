L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('CA','OK'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('MN','MS'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('CT','MS'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('MD','MS'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('MD','WV'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('CT','AL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
L = seq(0,80,20)
H = L+20
keep.df = state.df %>%
filter( PopName %in% c('CT','AL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
L = seq(0,80,20)
H = L+20
keep.df = state.df %>%
filter( PopName %in% c('CT','AL','MO'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(50,90,10)
H = L+10
L = seq(0,80,20)
H = L+20
keep.df = state.df %>%
filter( PopName %in% c('CT','AL','MO','MS'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
keep.df = state.df %>%
filter( PopName %in% c('CT','AL','MO','MS','FL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(55,95,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('CT','AL','MO','MS','FL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
keep.df = state.df %>%
filter( PopName %in% c('NY','FL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(45,85,10)
H = L+10
keep.df = state.df %>%
filter( PopName %in% c('NY','FL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
keep.df = state.df %>%
filter( PopName %in% c('NY','FL','OH','IL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
L = seq(55,75,5)
H = L+5
keep.df = state.df %>%
filter( PopName %in% c('NY','FL','OH','IL'),
Age %in% c(L,H)) %>%
group_by(PopName, Year) %>%
summarize( p1 = lx[Age==H[1] ] / lx[Age==L[1] ],
p2 = lx[Age==H[2] ] / lx[Age==L[2] ],
p3 = lx[Age==H[3] ] / lx[Age==L[3] ],
p4 = lx[Age==H[4] ] / lx[Age==L[4] ],
p5 = lx[Age==H[5] ] / lx[Age==L[5] ]) %>%
gather(key='var', value='prob', -PopName, -Year) %>%
mutate( var = factor(var,
levels=paste0('p',1:5),
labels=paste0('Survival from\n',
L,'-',H)))
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(0,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
#ggsave(file='JPN vs USA age-specific survival time series.png',
#       width=13, height=6)
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.50,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60, edof=8) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60, span=.20) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60, span=.40) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.60, span=.50) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
ggplot( data=keep.df, aes(x=Year, y=prob, group=PopName, color=PopName)) +
geom_point(size=0.6) +
geom_smooth(se=FALSE, lwd=1, alpha=.80) +
geom_hline( yintercept = 0) +
scale_y_continuous(limits=c(.60,1)) +
facet_grid(~var) +
theme_bw() +
labs(title='Probability of Survival over age intervals\nUS Males 1959-2015',
y="Probability of Survival (Males)",
color='State',
caption='Source: US Mortality Database      http://usa.mortality.org')
